<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selvo Labs Chat</title>

    <!-- Dialogflow CX Web Messenger -->
    <link rel="stylesheet" href="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/themes/df-messenger-default.css">
    <script src="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/df-messenger.js"></script>

    <style>
        df-messenger {
            z-index: 999;
            position: fixed;
            --df-messenger-font-color: #000;
            --df-messenger-font-family: Google Sans;
            --df-messenger-chat-background: #f3f6fc;
            --df-messenger-message-user-background: #d3e3fd;
            --df-messenger-message-bot-background: #fff;
            bottom: 16px;
            right: 16px;
        }

        /* Popup */
        #popup {
            position: fixed;
            bottom: 90px;
            right: 95px;
            background: white;
            padding: 12px 18px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            font-family: Google Sans, sans-serif;
            font-size: 15px;
            opacity: 0;
            transform: translateY(10px);
            pointer-events: none;
            transition: opacity 0.4s ease, transform 0.4s ease;
            z-index: 1000;
        }

        #popup.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
    </style>
</head>

<body>

<div id="popup">Welcome! How can I help you?</div>

<df-messenger
    location="us-central1"
    project-id="virtual-agent-training-476115"
    agent-id="80f40701-01b6-4ef3-b50c-c7209d4a5c04"
    language-code="en"
    max-query-length="-1">
    <df-messenger-chat-bubble chat-title="Selvo Labs Bot"></df-messenger-chat-bubble>
</df-messenger>

<script>
window.addEventListener("load", () => {

    // Show popup on every refresh
    setTimeout(() => {
        document.getElementById("popup").classList.add("show");
    }, 800);

    // Auto-send message to DF when widget is ready
    window.addEventListener("dfMessengerLoaded", () => {
        const dfMessenger = document.querySelector("df-messenger");

        if (dfMessenger) {
            // Send a message that triggers an intent
            dfMessenger.sendQuery("main menu");
        }
    });

});
</script>

</body>
</html>
